var SLPPREMIER=SLPPREMIER||{};SLPPREMIER.marker_cluster=function(){var all_markers,cluster_options;this.initialize=function(){if(this.enabled()){cluster_options={gridSize:slplus.options.cluster_gridsize?parseInt(slplus.options.cluster_gridsize):60,minimumClusterSize:slplus.options.cluster_minimum?parseInt(slplus.options.cluster_minimum):3};jQuery("#map").on("markers_dropped",SLPPREMIER.marker_cluster.create);slp_Filter("location_search_responded").subscribe(reset)}};this.create=function(){var gmlist=[];for(var idx=0;idx<cslmap.markers.length;idx++){gmlist.push(cslmap.markers[idx].__gmarker)}all_markers=new MarkerClusterer(cslmap.gmap,gmlist,cluster_options)};this.enabled=function(){return slplus.options.clusters_enabled==="1"};this.get_clustered_markers=function(){return all_markers};this.reset=function(){if(all_markers){all_markers.clearMarkers()}};return{create:create,enabled:enabled,get_clustered_markers:get_clustered_markers,initialize:initialize}}();